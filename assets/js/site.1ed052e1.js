!function(){"use strict";angular.module("nBlog",["ui.router","config","api","BlogHelpers","Posts","application","index","blog"])}(),function(){"use strict";function configure($locationProvider,$urlRouterProvider,$stateProvider){$locationProvider.hashPrefix("!"),$urlRouterProvider.otherwise("/")}function config(){function getConfig(key){return key?config[key]:config}function setConfig(key,value){config[key]=value}var config={ROOT_URL:""};return{getConfig:getConfig,setConfig:setConfig}}var core=angular.module("config",[]);core.config(configure),core.service("appConfig",config)}(),function(){"use strict";function run($rootScope,$state,Posts){console.info("Bootstrapping Angular v.:",angular.version.full),$rootScope.$on("$stateChangeStart",function(event,toState,toParams){Posts.collection||(console.info("No Site Configuration found, fetching..."),event.preventDefault(),Posts.getList().then(function(){$state.go(toState,toParams)}))})}angular.module("nBlog").run(run)}(),function(){"use strict";angular.module("api",[])}(),function(){"use strict";angular.module("api").constant("API",{root:"content/",blog:{list:"",single:"blog/"}})}(),function(){"use strict";angular.module("BlogHelpers",[])}(),function(){"use strict";function BlogHelpers(API,Posts){function pathToRoute(path){console.log(path,rootBlogPath);var sanitizedPath=path.replace(rootBlogPath,"");console.log(sanitizedPath)}function pathFromBaseName(routePath){for(var result,i=0,l=Posts.collection.blog.length;l>i;i++)Posts.collection.blog[i].basename===routePath&&(result=Posts.collection.blog[i].path);return result}var rootBlogPath=[API.root,API.blog.single].join("");return{pathToRoute:pathToRoute,pathFromBaseName:pathFromBaseName}}angular.module("BlogHelpers").service("BlogHelpers",BlogHelpers)}(),function(){"use strict";angular.module("application",[])}(),function(){"use strict";angular.module("application").config(function($stateProvider){var Application={name:"application","abstract":!0,views:{application:{templateUrl:"app/modules/application/application.template.html",controller:"Application",controllerAs:"application"}}};$stateProvider.state(Application)})}(),function(){"use strict";function Application(Posts){function activate(){}activate()}angular.module("application").controller("Application",Application)}(),function(){"use strict";angular.module("index",[])}(),function(){"use strict";angular.module("index").config(function($stateProvider){var Index={name:"application.index",url:"/",views:{"main@application":{templateUrl:"app/modules/index/index.template.html",controller:"Index",controllerAs:"index"}}};$stateProvider.state(Index)})}(),function(){"use strict";function Index($scope,Posts){function activate(){$scope.$watch(function(){return Posts.collection.blog},function(list){angular.isDefined(list)&&(vm.posts=list,vm.viewIsLoading=!1)})}var vm=this;vm.posts=[],vm.viewIsLoading=!0,activate()}angular.module("index").controller("Index",Index)}(),function(){"use strict";angular.module("blog",[])}(),function(){"use strict";angular.module("blog").config(function($stateProvider){var Blog={name:"application.blog",url:"/blog",views:{"main@application":{templateUrl:"app/modules/blog/blog.template.html",controller:"Blog",controllerAs:"blog"}}},BlogSingle={name:"application.blog.single",url:"/:path",params:{filePath:""},views:{content:{templateUrl:"app/modules/blog/single/blog-single.template.html",controller:"BlogSingle",controllerAs:"blogSingle"}},resolve:{post:function($stateParams,Posts,BlogHelpers){var postPath=$stateParams.filePath?$stateParams.filePath:BlogHelpers.pathFromBaseName($stateParams.path);return Posts.getSingle(postPath)}}};$stateProvider.state(Blog),$stateProvider.state(BlogSingle)})}(),function(){"use strict";function Blog(){function activate(){}activate()}angular.module("blog").controller("Blog",Blog)}(),function(){"use strict";function BlogSingle(post){function activate(){}var vm=this;vm.post=post,activate()}angular.module("blog").controller("BlogSingle",BlogSingle)}(),function(){"use strict";angular.module("Posts",[])}(),function(){"use strict";function Post(){var Model=function(data){angular.extend(this,data)};return Model}angular.module("Posts").factory("Post",Post)}(),function(){"use strict";function Posts($q,$http,$sce,API){function getList(){var deferred=$q.defer(),url=[API.root,API.blog.list,"site-config.json"].join("");return $http.get(url).then(function(response){var list=[];response.data.blog&&(list=response.data.blog),service.collection=response.data,deferred.resolve(list)})["catch"](function(err){console.error(err),deferred.reject(err)}),deferred.promise}function getSingle(path){var deferred=$q.defer(),url=path;return $http.get(url).then(function(response){var trustedData=$sce.trustAsHtml(response.data);deferred.resolve(trustedData)})["catch"](function(err){console.error(err),deferred.reject(err)}),deferred.promise}var service={getList:getList,getSingle:getSingle,collection:void 0};return service}angular.module("Posts").service("Posts",Posts)}(),function(){angular.module("nBlog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("app/modules/application/application.template.html",'<h1>BLOGICATION</h1>\n\n<div ui-view="main"></div>'),$templateCache.put("app/modules/blog/blog.template.html",'<p>This is the blog view.</p>\n<div ui-view="content"></div>'),$templateCache.put("app/modules/blog/single/blog-single.template.html",'<div ng-bind-html="blogSingle.post"></div>'),$templateCache.put("app/modules/index/index.template.html",'<h1 ng-show="index.viewIsLoading">LOADING</h1>\n<p>This is the index view.</p>\n<ul>\n    <li ng-repeat="post in index.posts track by $index">\n        <a ui-sref="application.blog.single({\n            path: post.basename,\n            filePath: post.path\n        })">\n            {{post.title}}\n        </a>\n    </li>\n</ul>\n<div>{{index.posts}}</div>')}])}();