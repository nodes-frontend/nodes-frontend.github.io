!function(){"use strict";angular.module("nBlog",["ui.router","oc.lazyLoad","config","api","notFound","PageHelpers","BlogHelpers","Site","Posts","Pages","application-shell","index","page","blog"])}(),function(){"use strict";function configure($locationProvider,$urlRouterProvider,$stateProvider,$httpProvider){$locationProvider.hashPrefix("!"),$urlRouterProvider.otherwise("/")}function config(){function getConfig(key){return key?config[key]:config}function setConfig(key,value){config[key]=value}var config={ROOT_URL:""};return{getConfig:getConfig,setConfig:setConfig}}var core=angular.module("config",[]);core.config(configure),core.service("appConfig",config)}(),function(){"use strict";function run($rootScope,$state,Site){console.info("Bootstrapping Angular v.:",angular.version.full),console.log(),$rootScope.$on("$stateChangeStart",function(event,toState,toParams){Object.keys(Site.collection).length<1&&(console.info("No Site Configuration found, fetching..."),event.preventDefault(),Site.init().then(function(){$state.go(toState,toParams)}))})}angular.module("nBlog").run(run)}(),function(){"use strict";angular.module("api",[])}(),function(){"use strict";angular.module("api").constant("API",{root:"content/",blog:{list:"",single:"blog/"},pages:{list:"",single:"pages/"},data:"data/"})}(),function(){"use strict";angular.module("PageHelpers",[])}(),function(){"use strict";function PageHelpers(API,Site){function pathFromBaseName(routePath){for(var result,i=0,l=Site.collection.pages.length;l>i;i++)Site.collection.pages[i].basename===routePath&&(result=Site.collection.pages[i].path);return result}[API.root,API.pages.single].join("");return{pathFromBaseName:pathFromBaseName}}angular.module("PageHelpers").service("PageHelpers",PageHelpers)}(),function(){"use strict";angular.module("BlogHelpers",[])}(),function(){"use strict";function BlogHelpers(API,Site){function pathToRoute(path){console.log(path,rootBlogPath);var sanitizedPath=path.replace(rootBlogPath,"");console.log(sanitizedPath)}function pathFromBaseName(routePath){for(var result,i=0,l=Site.collection.blog.length;l>i;i++)Site.collection.blog[i].basename===routePath&&(result=Site.collection.blog[i].path);return result}var rootBlogPath=[API.root,API.blog.single].join("");return{pathToRoute:pathToRoute,pathFromBaseName:pathFromBaseName}}angular.module("BlogHelpers").service("BlogHelpers",BlogHelpers)}(),function(){"use strict";angular.module("application-shell",[])}(),function(){"use strict";angular.module("application-shell").config(function($stateProvider){var ApplicationShell={name:"application","abstract":!0,views:{application:{templateUrl:"app/modules/application-shell/application-shell.template.html",controller:"ApplicationShellController",controllerAs:"applicationShell"}}};$stateProvider.state(ApplicationShell)})}(),function(){"use strict";function ApplicationShellController(Site,$scope){function activate(){Site.collection.blog.length>0&&(vm.hasBlog=!0);$scope.$watch(function(){return Site.collection.pages},function(list){angular.isDefined(list)&&(vm.pages=list,vm.viewIsLoading=!1)})}var vm=this;vm.pages=[],vm.viewIsLoading=!0,vm.hasBlog=!1,activate()}angular.module("application-shell").controller("ApplicationShellController",ApplicationShellController)}(),function(){"use strict";angular.module("notFound",[])}(),function(){"use strict";angular.module("notFound").config(function($stateProvider){var notFound={name:"application.notFound",url:"/404",views:{"main@application":{templateUrl:"app/modules/404/404.template.html",controller:"NotFound",controllerAs:"notFound"}}};$stateProvider.state(notFound)})}(),function(){"use strict";function NotFound($scope,Posts){function activate(){}activate()}angular.module("notFound").controller("NotFound",NotFound)}(),function(){"use strict";angular.module("index",[])}(),function(){"use strict";angular.module("index").config(function($stateProvider){var Index={name:"application.index",url:"/",views:{"main@application":{templateUrl:"app/modules/index/index.template.html",controller:"Index",controllerAs:"index"}}};$stateProvider.state(Index)})}(),function(){"use strict";function Index($scope,Site){function activate(){}var vm=this;vm.posts=[],vm.viewIsLoading=!0,activate()}angular.module("index").controller("Index",Index)}(),function(){"use strict";angular.module("page",[])}(),function(){"use strict";angular.module("page").config(function($stateProvider){var Page={name:"application.page",url:"/page/:path",params:{page:{},string:""},views:{"main@application":{templateUrl:"app/modules/page/page.template.html",controller:"Page",controllerAs:"page"}},resolve:{pageContent:function($stateParams,Pages,PageHelpers){console.log($stateParams);var pagePath=$stateParams.filePath?$stateParams.filePath:PageHelpers.pathFromBaseName($stateParams.path);return Pages.getSingleContent(pagePath)},pageModel:function($stateParams,Site,PageHelpers){var pagePath=$stateParams.filePath?$stateParams.filePath:PageHelpers.pathFromBaseName($stateParams.path);return Site.getPageModel(pagePath)}}};$stateProvider.state(Page)})}(),function(){"use strict";function Page(pageContent,pageModel){function activate(){}var vm=this;vm.content=pageContent,vm.model=pageModel,console.log(pageModel),activate()}angular.module("page").controller("Page",Page)}(),function(){"use strict";angular.module("blog",[])}(),function(){"use strict";angular.module("blog").config(function($stateProvider){var Blog={name:"application.blog",url:"/blog",views:{"main@application":{templateUrl:"app/modules/blog/blog.template.html",controller:"Blog",controllerAs:"blog"}}},BlogSingle={name:"application.blog.single",url:"/:path",params:{filePath:""},views:{"main@application":{templateUrl:"app/modules/blog/single/blog-single.template.html",controller:"BlogSingle",controllerAs:"blogSingle"}},resolve:{postContent:function($stateParams,Posts,BlogHelpers){var postPath=$stateParams.filePath?$stateParams.filePath:BlogHelpers.pathFromBaseName($stateParams.path);return Posts.getSingle(postPath)},postModel:function($stateParams,Site,BlogHelpers){var postPath=$stateParams.filePath?$stateParams.filePath:BlogHelpers.pathFromBaseName($stateParams.path);return Site.getPostModel(postPath)}}};$stateProvider.state(Blog),$stateProvider.state(BlogSingle)})}(),function(){"use strict";function Blog($scope,Site){function activate(){$scope.$watch(function(){return Site.collection.blog},function(list){angular.isDefined(list)&&(vm.posts=list,vm.viewIsLoading=!1)})}console.log("BLOG CONT");var vm=this;vm.posts=[],vm.viewIsLoading=!0,activate()}angular.module("blog").controller("Blog",Blog)}(),function(){"use strict";function BlogSingle(postContent,postModel){function activate(){}var vm=this;vm.postContent=postContent,vm.postModel=postModel,activate()}angular.module("blog").controller("BlogSingle",BlogSingle)}(),function(){"use strict";angular.module("Site",[])}(),function(){"use strict";function Site($q,$http,API,Page,Post){function init(){var deferred=$q.defer(),configUrl=[API.root,"site-config.json"].join(""),authorsUrl=[API.data,"authors.json"].join("");return $http.get(authorsUrl).then(function(response){return service.collection.authors=response.data,$http.get(configUrl)}).then(function(response){if(response.data.pages){service.collection.pages=[];for(var pI=0,pL=response.data.pages.length;pL>pI;pI++){var page=new Page(response.data.pages[pI]);service.collection.pages.push(page)}}if(response.data.blog){service.collection.blog=[];for(var bI=0,bL=response.data.blog.length;bL>bI;bI++){var post=new Post(response.data.blog[bI]);post.author=service.collection.authors[post.author],service.collection.blog.push(post),console.log(post)}}deferred.resolve(service.collection)})["catch"](function(err){deferred.reject(err)}),deferred.promise}function getPostModel(path){var deferred=$q.defer();service.collection.blog||deferred.reject("Page Model Not Found!");for(var i=0,l=service.collection.blog.length;l>i;i++)service.collection.blog[i].path===path&&deferred.resolve(service.collection.blog[i]);return deferred.promise}function getPageModel(path){var deferred=$q.defer();service.collection.pages||deferred.reject("Page Model Not Found!");for(var i=0,l=service.collection.pages.length;l>i;i++)service.collection.pages[i].path===path&&deferred.resolve(service.collection.pages[i]);return deferred.promise}var service={init:init,getPostModel:getPostModel,getPageModel:getPageModel,collection:{}};return service}angular.module("Site").service("Site",Site)}(),function(){"use strict";angular.module("Posts",[])}(),function(){"use strict";function Post(){var Model=function(data){angular.extend(this,data)};return Model}angular.module("Posts").factory("Post",Post)}(),function(){"use strict";function Posts($q,$http,$sce,$state,API){function getList(){var deferred=$q.defer(),url=[API.root,API.blog.list,"site-config.json"].join("");return $http.get(url).then(function(response){var list=[];response.data.blog&&(list=response.data.blog),service.collection=response.data,deferred.resolve(list)})["catch"](function(err){console.error(err),deferred.reject(err)}),deferred.promise}function getSingle(path){var deferred=$q.defer(),url=path;return $http.get(url).then(function(response){var trustedData=$sce.trustAsHtml(response.data);deferred.resolve(trustedData)})["catch"](function(err){console.error(err),$state.go("application.notFound"),deferred.reject(err)}),deferred.promise}var service={getList:getList,getSingle:getSingle,collection:void 0};return service}angular.module("Posts").service("Posts",Posts)}(),function(){"use strict";angular.module("Pages",[])}(),function(){"use strict";function Page(Pages){var Model=function(data){angular.extend(this,data)};return Model.prototype.getContent=function(){console.log("GET IT MOFO")},Model.prototype.getPath=function(){return this.path},Model}angular.module("Pages").factory("Page",Page)}(),function(){"use strict";function Pages($q,$http,$sce,$state,API){function getList(){var deferred=$q.defer(),url=[API.root,API.pages.list,"site-config.json"].join("");return $http.get(url).then(function(response){var list=[];response.data.pages&&(list=response.data.pages),service.collection=response.data,deferred.resolve(list)})["catch"](function(err){console.error(err),deferred.reject(err)}),deferred.promise}function getSingleContent(path){var deferred=$q.defer(),url=path;return $http.get(url).then(function(response){var trustedData=$sce.trustAsHtml(response.data);deferred.resolve(trustedData)})["catch"](function(err){console.error(err),$state.go("application.notFound"),deferred.reject(err)}),deferred.promise}var service={getList:getList,getSingleContent:getSingleContent,collection:void 0};return service}angular.module("Pages").service("Pages",Pages)}(),function(){angular.module("nBlog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("app/modules/404/404.template.html","<h1>404 mofo</h1>"),$templateCache.put("app/modules/application-shell/application-shell.template.html",'<div class="application-shell">\n\n    <div class="top-bar">\n        <div class="row">\n            <div class="small-12 columns">\n                <div class="top-bar-left">\n                    <ul class="dropdown menu" data-dropdown-menu>\n                        <li class="menu-text">Nodes Frontend</li>\n                    </ul>\n                </div>\n                <div class="top-bar-right">\n                    <ul class="menu">\n                        <li ng-repeat="page in applicationShell.pages track by page.id">\n                            <a ui-sref="application.page({\n                                path: page.basename,\n                                page: page,\n                                string: page.title\n                            })">\n                                {{page.title}}\n                            </a>\n                        </li>\n                        <li ng-if="applicationShell.hasBlog">\n                            <a ui-sref="application.blog">\n                                Blog\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="content" ui-view="main"></div>\n\n    <footer class="footer">\n        <div class="row">\n            <div class="small-12 columns">\n                © Nodes Agency 2015\n            </div>\n        </div>\n    </footer>\n\n</div>'),$templateCache.put("app/modules/blog/blog.template.html",'<div class="row">\n    <div class="small-12 columns post-list">\n\n        <div class="post-list__card" ng-repeat="post in blog.posts track by $index">\n            <h2>\n                <a ui-sref="application.blog.single({\n                    path: post.basename,\n                    filePath: post.path\n                })">\n                    {{post.title}}\n                </a>\n            </h2>\n\n            <p>\n                Posted: {{post.posted}}\n            </p>\n            <p ng-if="post.author">\n                By: {{post.author.name}}\n            </p>\n        </div>\n\n    </div>\n</div>'),$templateCache.put("app/modules/blog/single/blog-single.template.html",'<div class="row post">\n    <div class="small-12 columns">\n\n        <h1>Lorem ipsum dolor sit amet.</h1>\n        <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa excepturi iusto omnis porro. Eius exercitationem molestias neque praesentium recusandae reiciendis sequi tempora temporibus! Animi corporis nihil rem repellendus velit? Alias atque consequatur eligendi et impedit nemo nihil, nostrum qui sit?</p>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa excepturi iusto omnis porro. Eius exercitationem molestias neque praesentium recusandae reiciendis sequi tempora temporibus! Animi corporis nihil rem repellendus velit? Alias atque consequatur eligendi et impedit nemo nihil, nostrum qui sit?</p>\n\n        <blockquote cite="http://trentwalton.com/2012/06/19/fluid-type">\n            Embracing the fluid &amp; flexible aspect of responsive web design was an easy decision, but I’ve been less sure-footed when it comes to balancing that with setting type on the web\n            <cite>\n                Trent Walton\n            </cite>\n        </blockquote>\n\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet assumenda ex nostrum odit quidem similique sit, tempore! Ab accusantium cum eius iste itaque libero, mollitia nihil provident quasi, ut vel voluptate! Asperiores consequatur deserunt dolorem optio, rerum voluptates?</p>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet assumenda ex nostrum odit quidem similique sit, tempore! Ab accusantium cum eius iste itaque libero, mollitia nihil provident quasi, ut vel voluptate! Asperiores consequatur deserunt dolorem optio, rerum voluptates?</p>\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet assumenda ex nostrum odit quidem similique sit, tempore! Ab accusantium cum eius iste itaque libero, mollitia nihil provident quasi, ut vel voluptate! Asperiores consequatur deserunt dolorem optio, rerum voluptates?</p>\n\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, quod?</p>\n        <p class="bold">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, quod?</p>\n        <p class="italic">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, quod?</p>\n        <p class="bold italic">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, quod?</p>\n\n        <h1>Open Sans</h1>\n        <h2>Open Sans</h2>\n        <h3>Open Sans</h3>\n        <h4>Open Sans</h4>\n        <h5>Open Sans</h5>\n        <h6>Open Sans</h6>\n    \n        <h1 class="italic">Open Sans italic</h1>\n        <h2 class="italic">Open Sans italic</h2>\n        <h3 class="italic">Open Sans italic</h3>\n        <h4 class="italic">Open Sans italic</h4>\n        <h5 class="italic">Open Sans italic</h5>\n        <h6 class="italic">Open Sans italic</h6>\n\n        <h1 class="light">Open Sans light</h1>\n        <h2 class="light">Open Sans light</h2>\n        <h3 class="light">Open Sans light</h3>\n        <h4 class="light">Open Sans light</h4>\n        <h5 class="light">Open Sans light</h5>\n        <h6 class="light">Open Sans light</h6>\n    \n        <h1 class="light italic">Open Sans light italic</h1>\n        <h2 class="light italic">Open Sans light italic</h2>\n        <h3 class="light italic">Open Sans light italic</h3>\n        <h4 class="light italic">Open Sans light italic</h4>\n        <h5 class="light italic">Open Sans light italic</h5>\n        <h6 class="light italic">Open Sans light italic</h6>\n    \n        <h1 class="bold">Open Sans bold</h1>\n        <h2 class="bold">Open Sans bold</h2>\n        <h3 class="bold">Open Sans bold</h3>\n        <h4 class="bold">Open Sans bold</h4>\n        <h5 class="bold">Open Sans bold</h5>\n        <h6 class="bold">Open Sans bold</h6>\n    \n        <h1 class="bold italic">Open Sans bold italic</h1>\n        <h2 class="bold italic">Open Sans bold italic</h2>\n        <h3 class="bold italic">Open Sans bold italic</h3>\n        <h4 class="bold italic">Open Sans bold italic</h4>\n        <h5 class="bold italic">Open Sans bold italic</h5>\n        <h6 class="bold italic">Open Sans bold italic</h6>\n\n    </div>\n    <div class="small-12 columns">\n        {{blogSingle.postModel.author.name}} er sød\n    </div>\n    <div class="small-12 columns">\n        <div ng-if="!blogSingle.postModel.isAngular" ng-bind-html="blogSingle.postContent"></div>\n        <div ng-if="blogSingle.postModel.isAngular" ng-include="blogSingle.postModel.path"></div>\n    </div>\n</div>'),$templateCache.put("app/modules/index/index.template.html",'<h1 ng-show="index.viewIsLoading">LOADING</h1>\n<p>This is the index view.</p>'),$templateCache.put("app/modules/page/page.template.html",'<p>This is the page view.</p>\n<div ng-if="!page.model.isAngular" ng-bind-html="page.content"></div>\n<div ng-if="page.model.isAngular" ng-include="page.model.path"></div>')}])}();